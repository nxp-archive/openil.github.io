<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title><!DOCTYPE html>
        <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
            <meta http-equiv="content-type" content="text/html; charset=utf-8"/>
            <title></title>
            <meta name="keywords" content=""/>
            <meta name="description" content=""/>
            <meta http-equiv="pragma" content="no-cache"/>
            <!-- Mobile Specific Metas  ================================================== -->
            <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
            <link rel="stylesheet" type="text/css" href="../../bootstrap/css/bootstrap.css">
            <link rel="stylesheet" type="text/css" href="../../style.css" media="screen, projection"/>
            <link rel="stylesheet" type="text/css" href="../../jcarousel_skin.css">
            <link rel="stylesheet" type="text/css" href="../../preloader/css/preloader.css"/>
            <link rel="stylesheet" type="text/css" href="../../prettyPhoto/css/prettyPhoto.css"/>
            <link rel="stylesheet" type="text/css" href="../../css/menusm.css"/>
            <link rel="stylesheet" type="text/css" href="../../ui_totop/css/ui.totop.css"/>
            <link rel="stylesheet" type="text/css" href="../../css/layout.css">
            <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,600,700,800,300&subset=latin,cyrillic'
                  rel='stylesheet' type='text/css'>
            <link href='https://fonts.googleapis.com/css?family=Six+Caps' rel='stylesheet' type='text/css'>
        </head>

<body>
<div id="wrapper">
    <div id="header">
        <div class="navbar navbar-fixed-top">
            <div class="container">
                <div class="navbar-inner"><a class="brand" href="index.html">OpenIL</a>
                    <div class="menu">
                        <script type="text/javascript" src="../../js/menu_html_block.js"></script>
                    </div>
                </div>
            </div>
            <!--navbar-->
        </div>
    </div>

    <!-- #header-->
    <div class="clr"></div>
    <div id="content" class="nogap container">
        <div class="row">
            <div class="separator"></div>
            <h1 class="text-center extrabold">users -- OPENIL usage discussions</h1>
            <h2 class="sub-title" style="background: rgb(255, 240, 208);padding: 0 10px;font-weight:bold;">Subscribing to users</h2>
            <p style="font-size:12px;">Subscribe to users by filling out the following form. You will be sent email requesting confirmation, to prevent others
                from gratuitously subscribing you. This is a hidden list, which means that the list of members is available only to the list administrator.</p>
            <div class="separator">
                <form class="form-horizontal js-mail-subscribe"  action="" method="post" target="hidefrm">
                    <input type="hidden" name="mailingList" id="mailingList" value=''>
                    <div class="control-group">
                        <label class="control-label" for="userEmailAddr">
                            Your email address:</label>
                        <div class="controls">
                            <input type="email" id="userEmailAddr" name="userEmailAddr" placeholder="Your email address" class="input-xxlarge" required="required" pattern="\w+[@]{1}\w+[.]\w+" oninvalid="setCustomValidity('The email address you supplied is not valid');">
                        </div>
                    </div>
                    <div class="control-group">
                        <div class="controls">
                            <button type="submit" class="btn js-Subscribe">Subscribe</button>
                            <button type="submit" class="btn js-Unsubscribe">Unsubscribe</button>
                        </div>
                    </div>
                </form>
                <iframe src="" name="hidefrm" frameborder="0" class="hidefrm" ></iframe>
            </div>
        </div>
        <div class="row custom-content" id="mailing-lists">
            <div class="span12">
                <table class="table">
                    <tbody></tbody>
                </table>
            </div>
        </div>
    </div>
    <!-- #content-->

</div>
<!-- #wrapper -->

<div id="footer">
    <div class="container">
        <div class="cols">
            <div class="row">
                <div class="span4 offset2">
                    <h4>Stay Connected</h4>
                </div>
                <!--<div class="span4">-->
                    <!-- <h4>Subscribe to our Newsletter</h4>
                    <p>Sign up to receive email notifications of news and events from OpenIl.org.</p>
                    <form id="subscribe" name="subscribe" action="#" method="post" class="validate" target="_blank">
                        <div class="input-append">
                            <input type="email" id="email" name="email" placeholder="Your Email">
                            <button class="subscribe-button btn" type="submit">SUBSCRIBE</button>
                        </div>
                    </form>
                    <div class="social">
                        <h4>follow us</h4>
                        <a class="soc1" href="#"></a> <a class="soc2" href="#"></a> <a class="soc3" href="#"></a> <a
                            class="soc4" href="#"></a> <a class="soc5" href="#"></a> <a class="soc6" href="#"></a> <a
                            class="soc7" href="#"></a> <a class="soc8" href="#"></a> <a class="soc9" href="#"></a></div>
                    <div class="clr"></div> -->
                <!--</div>-->
                <div class="span4">
                    <div class="lastcol">
                        <h4>Key Technologies</h4>
                        <span class="label">Linux</span>
                        <span class="label label-success">TSN</span>
                        <span class="label label-warning">IEEE 1588</span>
                        <span class="label label-important">Security</span>
                        <span class="label label-info">Xenomai</span>
                        <span class="label label-inverse">IoT</span>
                        <span class="label">Industrial</span>
                        <span class="label label-success">Real-Time</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- container cols -->
    <script type="text/javascript" src="js/utilities.js"></script>
    <script type="text/javascript">display_copyright()</script>
</div>
<!-- #footer -->



<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7/jquery.min.js"></script>
<script type="text/javascript" src="../../js/jquery.jcarousel.min.js"></script>
<script type="text/javascript" src="../../bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="../../prettyPhoto/js/jquery.prettyPhoto.js"></script>
<script type="text/javascript" src="../../js/menusm.js"></script>
<script type="text/javascript" src="../../js/scripts.js"></script>
<script type="text/javascript" src="../../ui_totop/js/jquery.ui.totop.js" charset="utf-8"></script>
<script type="text/javascript" src="../../preloader/js/jquery.preloader.js" charset="utf-8"></script>
<script type="text/javascript" src="../../js/tinynav.min.js"></script>
<script type="text/javascript">
    var aws_get_mailing_list_registration_url="https://wvpkul46d8.execute-api.us-west-2.amazonaws.com/prod/mailing-list-registration";
    var aws_get_mailing_list_unsubscribe_url="https://wvpkul46d8.execute-api.us-west-2.amazonaws.com/prod/mailing-list-unsubscribe";

    //get url params
    (function ($) {
        $.getUrlParam = function (name) {
            var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
            var r = window.location.search.substr(1).match(reg);
            if (r != null) return unescape(r[2]); return null;
        }
    })(jQuery);
    var mailingList = $.getUrlParam('mailingList');
    console.log(mailingList);
    $("#mailingList").val(mailingList);
    /*$('.js-mail-subscribe').submit(function() {
            $.ajax({
                url:aws_get_mailing_list_registration_url,
                dataType:'jsonp',
                data:$(".js-mail-subscribe").serialize(),
                type:'POST',
                crossDomain:true,
                cache:false,
                error:function(data){console.log(data)},
                success:function(data){console.log(data);alert("subscribe is successful")}

            });
           return false;
    });
    $('.js-Unsubscribe').submit(function() {
            $(this).ajaxSubmit({
                url:aws_get_mailing_list_unsubscribe_url,
                dataType:'json',
                data:$(".js-mail-subscribe").serialize(),
                type:'POST',
                crossDomain:true,
                success:function(data){alert("Unsubscribe is successful")},
                error:function(data){alert("11")}
            });
            return false;
    });*/

   /* document.domain = 'https://wvpkul46d8.execute-api.us-west-2.amazonaws.com';
    window.speakerFormCB = function(rs){};*/
    /*$('.js-mail-subscribe').submit();*/


    $(".js-Subscribe").click(function(){
       /* $(".js-mail-subscribe").attr("action",aws_get_mailing_list_registration_url);
        $('.js-mail-subscribe').submit();*/
       var data={"userEmailAddr":$("#userEmailAddr").val(),"mailingList":$("#mailingList").val()};
       console.log(data);
        $.ajax({
            type: "post",
            contentType:"application/json",
            dataType:"json",
            crossDomain:true,
            xhrFields: {
                // The 'xhrFields' property sets additional fields on the XMLHttpRequest.
                // This can be used to set the 'withCredentials' property.
                // Set the value to 'true' if you'd like to pass cookies to the server.
                // If this is enabled, your server must respond with the header
                // 'Access-Control-Allow-Credentials: true'.
                withCredentials: true
            },
            url: aws_get_mailing_list_registration_url,
            data:data,
            success: function(data) {
                // Here's where you handle a successful response.
                console.log(data);
            },

            error: function(err) {
                console.log(err);
                // Here's where you handle an error response.
                // Note that if the error was due to a CORS issue,
                // this function will still fire, but there won't be any additional
                // information about the error.
            }
        })

    });
    $(".js-Unsubscribe").click(function(){
        $(".js-mail-subscribe").attr("action",aws_get_mailing_list_unsubscribe_url);
        $(".js-mail-subscribe").submit();

    })



</script>
</body>
</html></title>
</head>
<body>

</body>
</html>
